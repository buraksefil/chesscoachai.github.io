"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{905:(e,t,r)=>{let n;r.d(t,{V:()=>tg});var i,s,o=r(5155),a=r(2115),l=r(5704);let u=(0,a.createContext)({dragDropManager:void 0});function c(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var h="function"==typeof Symbol&&Symbol.observable||"@@observable",d=function(){return Math.random().toString(36).substring(7).split("").join(".")},g={INIT:"@@redux/INIT"+d(),REPLACE:"@@redux/REPLACE"+d(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+d()}};function f(e,t,...r){if(void 0!==l&&void 0===t)throw Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;(e=Error(t.replace(/%s/g,function(){return r[n++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}function p(e){return"object"==typeof e}let v="dnd-core/INIT_COORDS",m="dnd-core/BEGIN_DRAG",b="dnd-core/PUBLISH_DRAG_SOURCE",y="dnd-core/HOVER",S="dnd-core/DROP",O="dnd-core/END_DRAG";function w(e,t){return{type:v,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}let C={type:v,payload:{clientOffset:null,sourceClientOffset:null}};function _(e,t){return null===t?null===e:Array.isArray(e)?e.some(e=>e===t):e===t}class D{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){var e,t,r,n,i;let s=this,{dispatch:o}=this.store,a={beginDrag:(e=this,function(t=[],r={publishSource:!0}){let{publishSource:n=!0,clientOffset:i,getSourceClientOffset:s}=r,o=e.getMonitor(),a=e.getRegistry();e.dispatch(w(i)),f(!o.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(e){f(a.getSource(e),"Expected sourceIds to be registered.")});let l=function(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}(t,o);if(null==l)return void e.dispatch(C);let u=null;if(i){if(!s)throw Error("getSourceClientOffset must be defined");f("function"==typeof s,"When clientOffset is provided, getSourceClientOffset must be a function."),u=s(l)}e.dispatch(w(i,u));let c=a.getSource(l).beginDrag(o,l);if(null!=c)return f(p(c),"Item must be an object."),a.pinSource(l),{type:m,payload:{itemType:a.getSourceType(l),item:c,sourceId:l,clientOffset:i||null,sourceClientOffset:u||null,isSourcePublic:!!n}}}),publishDragSource:(t=this,function(){if(t.getMonitor().isDragging())return{type:b}}),hover:(r=this,function(e,{clientOffset:t}={}){f(Array.isArray(e),"Expected targetIds to be an array.");let n=e.slice(0),i=r.getMonitor(),s=r.getRegistry();return function(e,t,r){for(let n=e.length-1;n>=0;n--){let i=e[n];_(t.getTargetType(i),r)||e.splice(n,1)}}(n,s,i.getItemType()),function(e,t,r){f(t.isDragging(),"Cannot call hover while not dragging."),f(!t.didDrop(),"Cannot call hover after drop.");for(let t=0;t<e.length;t++){let n=e[t];f(e.lastIndexOf(n)===t,"Expected targetIds to be unique in the passed array."),f(r.getTarget(n),"Expected targetIds to be registered.")}}(n,i,s),n.forEach(function(e){s.getTarget(e).hover(i,e)}),{type:y,payload:{targetIds:n,clientOffset:t||null}}}),drop:(n=this,function(e={}){let t=n.getMonitor(),r=n.getRegistry();f(t.isDragging(),"Cannot call drop while not dragging."),f(!t.didDrop(),"Cannot call drop twice during one drag operation."),(function(e){let t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t})(t).forEach((i,s)=>{let o={type:S,payload:{dropResult:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e,function(e,t,r,n){var i;let s=r.getTarget(e),o=s?s.drop(n,e):void 0;return f(void 0===(i=o)||p(i),"Drop result must either be an object or undefined."),void 0===o&&(o=0===t?{}:n.getDropResult()),o}(i,s,r,t))}};n.dispatch(o)})}),endDrag:(i=this,function(){let e=i.getMonitor(),t=i.getRegistry();f(e.isDragging(),"Cannot call endDrag while not dragging.");let r=e.getSourceId();return null!=r&&(t.getSource(r,!0).endDrag(e,r),t.unpinSource()),{type:O}})};return Object.keys(a).reduce((e,t)=>{let r=a[t];return e[t]=(...e)=>{let t=r.apply(s,e);void 0!==t&&o(t)},e},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{let e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function E(e,t){return{x:e.x-t.x,y:e.y-t.y}}let k=[],T=[];k.__IS_NONE__=!0,T.__IS_ALL__=!0;class x{subscribeToStateChange(e,t={}){let{handlerIds:r}=t;f("function"==typeof e,"listener must be a function."),f(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let n=this.store.getState().stateId;return this.store.subscribe(()=>{let t=this.store.getState(),i=t.stateId;try{var s,o;i!==n&&(i!==n+1||(s=t.dirtyHandlerIds,o=r,s!==k&&(s===T||void 0===o||o.filter(e=>s.indexOf(e)>-1).length>0)))&&e()}finally{n=i}})}subscribeToOffsetChange(e){f("function"==typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{let r=this.store.getState().dragOffset;r!==t&&(t=r,e())})}canDragSource(e){if(!e)return!1;let t=this.registry.getSource(e);return f(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;let t=this.registry.getTarget(e);return f(t,`Expected to find a valid target. targetId=${e}`),!(!this.isDragging()||this.didDrop())&&_(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;let t=this.registry.getSource(e,!0);return f(t,`Expected to find a valid source. sourceId=${e}`),!!this.isDragging()&&!!this.isSourcePublic()&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;let{shallow:r}=t;if(!this.isDragging())return!1;let n=this.registry.getTargetType(e),i=this.getItemType();if(i&&!_(n,i))return!1;let s=this.getTargetIds();if(!s.length)return!1;let o=s.indexOf(e);return r?o===s.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){var e=this.store.getState().dragOffset;let{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return t&&r&&n?E({x:t.x+n.x,y:t.y+n.y},r):null}getDifferenceFromInitialOffset(){let{clientOffset:e,initialClientOffset:t}=this.store.getState().dragOffset;return e&&t?E(e,t):null}constructor(e,t){this.store=e,this.registry=t}}let I=void 0!==r.g?r.g:self,j=I.MutationObserver||I.WebKitMutationObserver;function P(e){return function(){let t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}let L="function"==typeof j?function(e){let t=1,r=new j(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){n.data=t=-t}}:P;class M{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}let A=new class{enqueueTask(e){let{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:e}=this;for(;this.index<e.length;){let t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,r=e.length-this.index;t<r;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=L(this.flush),this.requestErrorThrow=P(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},N=new class{create(e){let t=this.freeTasks,r=t.length?t.pop():new M(this.onError,e=>t[t.length]=e);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}(A.registerPendingError),R="dnd-core/ADD_SOURCE",q="dnd-core/ADD_TARGET",U="dnd-core/REMOVE_SOURCE",B="dnd-core/REMOVE_TARGET";function F(e,t){t&&Array.isArray(e)?e.forEach(e=>F(e,!1)):f("string"==typeof e||"symbol"==typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(i||(i={}));let K=0;function H(e){switch(e[0]){case"S":return i.SOURCE;case"T":return i.TARGET;default:throw Error(`Cannot parse handler ID: ${e}`)}}function z(e,t){let r=e.entries(),n=!1;do{let{done:e,value:[,i]}=r.next();if(i===t)return!0;n=!!e}while(!n);return!1}class W{addSource(e,t){F(e),f("function"==typeof t.canDrag,"Expected canDrag to be a function."),f("function"==typeof t.beginDrag,"Expected beginDrag to be a function."),f("function"==typeof t.endDrag,"Expected endDrag to be a function.");let r=this.addHandler(i.SOURCE,e,t);return this.store.dispatch({type:R,payload:{sourceId:r}}),r}addTarget(e,t){F(e,!0),f("function"==typeof t.canDrop,"Expected canDrop to be a function."),f("function"==typeof t.hover,"Expected hover to be a function."),f("function"==typeof t.drop,"Expected beginDrag to be a function.");let r=this.addHandler(i.TARGET,e,t);return this.store.dispatch({type:q,payload:{targetId:r}}),r}containsHandler(e){return z(this.dragSources,e)||z(this.dropTargets,e)}getSource(e,t=!1){return f(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return f(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return f(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return H(e)===i.SOURCE}isTargetId(e){return H(e)===i.TARGET}removeSource(e){var t;f(this.getSource(e),"Expected an existing source."),this.store.dispatch({type:U,payload:{sourceId:e}}),t=()=>{this.dragSources.delete(e),this.types.delete(e)},A.enqueueTask(N.create(t))}removeTarget(e){f(this.getTarget(e),"Expected an existing target."),this.store.dispatch({type:B,payload:{targetId:e}}),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){let t=this.getSource(e);f(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){f(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){let n=function(e){let t=(K++).toString();switch(e){case i.SOURCE:return`S${t}`;case i.TARGET:return`T${t}`;default:throw Error(`Unknown Handler Role: ${e}`)}}(e);return this.types.set(n,t),e===i.SOURCE?this.dragSources.set(n,r):e===i.TARGET&&this.dropTargets.set(n,r),n}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}let $={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let G={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function V(e={},t){var r;return{dirtyHandlerIds:function(e=k,t){switch(t.type){case y:break;case R:case q:case B:case U:return k;default:return T}let{targetIds:r=[],prevTargetIds:n=[]}=t.payload,i=function(e,t){let r=new Map,n=e=>{r.set(e,r.has(e)?r.get(e)+1:1)};e.forEach(n),t.forEach(n);let i=[];return r.forEach((e,t)=>{1===e&&i.push(t)}),i}(r,n);if(!(i.length>0||!function(e,t,r=(e,t)=>e===t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}(r,n)))return k;let s=n[n.length-1],o=r[r.length-1];return s!==o&&(s&&i.push(s),o&&i.push(o)),i}(e.dirtyHandlerIds,{type:t.type,payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t.payload,{prevTargetIds:(r=[],"dragOperation.targetIds".split(".").reduce((e,t)=>e&&e[t]?e[t]:r||null,e))})}),dragOffset:function(e=$,t){var r,n;let{payload:i}=t;switch(t.type){case v:case m:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case y:return r=e.clientOffset,n=i.clientOffset,!r&&!n||r&&n&&r.x===n.x&&r.y===n.y?e:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e,{clientOffset:i.clientOffset});case O:case S:return $;default:return e}}(e.dragOffset,t),refCount:function(e=0,t){switch(t.type){case R:case q:return e+1;case U:case B:return e-1;default:return e}}(e.refCount,t),dragOperation:function(e=G,t){var r,n;let{payload:i}=t;switch(t.type){case m:return Q({},e,{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case b:return Q({},e,{isSourcePublic:!0});case y:return Q({},e,{targetIds:i.targetIds});case B:return -1===e.targetIds.indexOf(i.targetId)?e:Q({},e,{targetIds:(r=e.targetIds,n=i.targetId,r.filter(e=>e!==n))});case S:return Q({},e,{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case O:return Q({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}(e.dragOperation,t),stateId:function(e=0){return e+1}(e.stateId)}}let X=0,Y=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Z=(0,a.memo)(function(e){var t,{children:r}=e;let[n,i]="manager"in(t=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]))?[{dragDropManager:t.manager},!1]:[function(e,t=J(),r,n){return t[Y]||(t[Y]={dragDropManager:function(e,t,r={},n=!1){let i=function(e){let t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return function e(t,r,n){if("function"==typeof r&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error(c(0));if("function"==typeof r&&void 0===n&&(n=r,r=void 0),void 0!==n){if("function"!=typeof n)throw Error(c(1));return n(e)(t,r)}if("function"!=typeof t)throw Error(c(2));var i,s=t,o=r,a=[],l=a,u=!1;function d(){l===a&&(l=a.slice())}function f(){if(u)throw Error(c(3));return o}function p(e){if("function"!=typeof e)throw Error(c(4));if(u)throw Error(c(5));var t=!0;return d(),l.push(e),function(){if(t){if(u)throw Error(c(6));t=!1,d();var r=l.indexOf(e);l.splice(r,1),a=null}}}function v(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(c(7));if(void 0===e.type)throw Error(c(8));if(u)throw Error(c(9));try{u=!0,o=s(o,e)}finally{u=!1}for(var t=a=l,r=0;r<t.length;r++)(0,t[r])();return e}return v({type:g.INIT}),(i={dispatch:v,subscribe:p,getState:f,replaceReducer:function(e){if("function"!=typeof e)throw Error(c(10));s=e,v({type:g.REPLACE})}})[h]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(c(11));function t(){e.next&&e.next(f())}return t(),{unsubscribe:p(t)}}})[h]=function(){return this},e},i}(V,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n),s=new x(i,new W(i)),o=new D(i,s),a=e(o,t,r);return o.receiveBackend(a),o}(e,t,r,n)}),t[Y]}(t.backend,t.context,t.options,t.debugMode),!t.context];return(0,a.useEffect)(()=>{if(i){let e=J();return++X,()=>{0==--X&&(e[Y]=null)}}},[]),(0,o.jsx)(u.Provider,{value:n,children:r})});function J(){return void 0!==r.g?r.g:window}var ee=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;0!=i--;){var n,i,s,o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r};let et="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;function er(e,t,r){let[n,i]=(0,a.useState)(()=>t(e)),s=(0,a.useCallback)(()=>{let s=t(e);ee(n,s)||(i(s),r&&r())},[n,e,r]);return et(s),[n,s]}function en(e,t,r){return function(e,t,r){let[n,i]=er(e,t,r);return et(function(){let t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(i,{handlerIds:[t]})},[e,i]),n}(t,e||(()=>({})),()=>r.reconnect())}function ei(e,t){let r=[...t||[]];return null==t&&"function"!=typeof e&&r.push(e),(0,a.useMemo)(()=>"function"==typeof e?e():e,r)}let es=!1,eo=!1;class ea{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){f(!es,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return es=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{es=!1}}isDragging(){if(!this.sourceId)return!1;f(!eo,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return eo=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{eo=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let el=!1;class eu{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;f(!el,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return el=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{el=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function ec(e,t,r,n){let i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;let s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;let a=Object.prototype.hasOwnProperty.bind(t);for(let o=0;o<s.length;o++){let l=s[o];if(!a(l))return!1;let u=e[l],c=t[l];if(!1===(i=r?r.call(n,u,c,l):void 0)||void 0===i&&u!==c)return!1}return!0}function eh(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ed(e){let t={};return Object.keys(e).forEach(r=>{let n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{let e=(e=null,t=null)=>{if(!(0,a.isValidElement)(e))return n(e,t),e;!function(e){if("string"==typeof e.type)return;let t=e.type.displayName||e.type.name||"the component";throw Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}(e);var r=t?e=>n(e,t):n;let i=e.ref;return f("string"!=typeof i,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),(0,a.cloneElement)(e,i?{ref:e=>{eg(i,e),eg(r,e)}}:{ref:r})};t[r]=()=>e}}),t}function eg(e,t){"function"==typeof e?e(t):e.current=t}class ef{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){let e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){let e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e),t}reconnectDragPreview(e=!1){let t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();r&&this.disconnectDragPreview(),this.handlerId&&(t?r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ec(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ec(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=ed({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,eh(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,eh(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class ep{get connectTarget(){return this.dropTarget}reconnect(){let e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();let t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ec(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=ed({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,eh(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function ev(){let{dragDropManager:e}=(0,a.useContext)(u);return f(null!=e,"Expected drag drop context"),e}class em{beginDrag(){let e=this.spec,t=this.monitor,r=null;return null!=(r="object"==typeof e.item?e.item:"function"==typeof e.item?e.item(t):{})?r:null}canDrag(){let e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}isDragging(e,t){let r=this.spec,n=this.monitor,{isDragging:i}=r;return i?i(n):t===e.getSourceId()}endDrag(){let e=this.spec,t=this.monitor,r=this.connector,{end:n}=e;n&&n(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}class eb{canDrop(){let e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){let e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){let e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function ey(e){let t=null;return()=>(null==t&&(t=e()),t)}class eS{enter(e){let t=this.entered.length;return this.entered=function(e,t){let r=new Set,n=e=>r.add(e);e.forEach(n),t.forEach(n);let i=[];return r.forEach(e=>i.push(e)),i}(this.entered.filter(t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e))),[e]),0===t&&this.entered.length>0}leave(e){let t=this.entered.length;return this.entered=this.entered.filter(this.isNodeInDocument).filter(t=>t!==e),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class eO{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null)})})}loadDataTransfer(e){if(e){let t={};Object.keys(this.config.exposeProperties).forEach(r=>{let n=this.config.exposeProperties[r];null!=n&&(t[r]={value:n(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}let ew="__NATIVE_FILE__",eC="__NATIVE_URL__",e_="__NATIVE_TEXT__",eD="__NATIVE_HTML__";var eE=Object.freeze({__proto__:null,FILE:ew,HTML:eD,TEXT:e_,URL:eC});function ek(e,t,r){let n=t.reduce((t,r)=>t||e.getData(r),"");return null!=n?n:r}let eT={[ew]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[eD]:{exposeProperties:{html:(e,t)=>ek(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[eC]:{exposeProperties:{urls:(e,t)=>ek(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[e_]:{exposeProperties:{text:(e,t)=>ek(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function ex(e){if(!e)return null;let t=Array.prototype.slice.call(e.types||[]);return Object.keys(eT).filter(e=>{let r=eT[e];return!!(null==r?void 0:r.matchesTypes)&&r.matchesTypes.some(e=>t.indexOf(e)>-1)})[0]||null}let eI=ey(()=>/firefox/i.test(navigator.userAgent)),ej=ey(()=>!!window.safari);class eP{interpolate(e){let{xs:t,ys:r,c1s:n,c2s:i,c3s:s}=this,o=t.length-1;if(e===t[o])return r[o];let a,l=0,u=s.length-1;for(;l<=u;){let n=t[a=Math.floor(.5*(l+u))];if(n<e)l=a+1;else{if(!(n>e))return r[a];u=a-1}}let c=e-t[o=Math.max(0,u)],h=c*c;return r[o]+n[o]*c+i[o]*h+s[o]*c*h}constructor(e,t){let r,n,i,{length:s}=e,o=[];for(let e=0;e<s;e++)o.push(e);o.sort((t,r)=>e[t]<e[r]?-1:1);let a=[],l=[];for(let i=0;i<s-1;i++)r=e[i+1]-e[i],n=t[i+1]-t[i],a.push(r),l.push(n/r);let u=[l[0]];for(let e=0;e<a.length-1;e++){let t=l[e],n=l[e+1];if(t*n<=0)u.push(0);else{r=a[e];let i=a[e+1],s=r+i;u.push(3*s/((s+i)/t+(s+r)/n))}}u.push(l[l.length-1]);let c=[],h=[];for(let e=0;e<u.length-1;e++){i=l[e];let t=u[e],r=1/a[e],n=t+u[e+1]-i-i;c.push((i-t-n)*r),h.push(n*r*r)}this.xs=e,this.ys=t,this.c1s=u,this.c2s=c,this.c3s=h}}function eL(e){let t=1===e.nodeType?e:e.parentElement;if(!t)return null;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function eM(e){return{x:e.clientX,y:e.clientY}}function eA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}class eN{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null==(e=this.dragStartSourceIds)?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null==(t=this.dragOverTargetIds)?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){var e;let t=this.rootElement;void 0!==t&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null==(e=this.window)||e.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);let n=t=>this.handleDragStart(t,e),i=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",n),t.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",n),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}connectDropTarget(e,t){let r=t=>this.handleDragEnter(t,e),n=t=>this.handleDragOver(t,e),i=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",n),t.addEventListener("drop",i),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",n),t.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return eA({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let e=this.monitor.getSourceId();return eA({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){let e=this.monitor.getItemType();return Object.keys(eE).some(t=>eE[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){let r=eT[e];if(!r)throw Error(`native type ${e} has no configuration`);let n=new eO(r);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout(()=>{var e;return null==(e=this.rootElement)?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;return this.currentDragSourceNode=null,this.rootElement&&(null==(e=this.window)||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&eL(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>!!(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{let e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!=typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;let{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;let r=eM(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});let{dataTransfer:n}=e,i=ex(n);if(this.monitor.isDragging()){if(n&&"function"==typeof n.setDragImage){let e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),i=this.sourcePreviewNodes.get(e)||t;if(i){let{anchorX:e,anchorY:s,offsetX:o,offsetY:a}=this.getCurrentSourcePreviewNodeOptions(),l=function(e,t,r,n,i){var s;let o,a,l,u="IMG"===t.nodeName&&(eI()||!(null==(s=document.documentElement)?void 0:s.contains(t))),c=eL(u?e:t),h={x:r.x-c.x,y:r.y-c.y},{offsetWidth:d,offsetHeight:g}=e,{anchorX:f,anchorY:p}=n,{dragPreviewWidth:v,dragPreviewHeight:m}=(o=u?t.width:d,a=u?t.height:g,ej()&&u&&(a/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:a}),{offsetX:b,offsetY:y}=i;return{x:0===b||b?b:new eP([0,.5,1],[h.x,h.x/d*v,h.x+v-d]).interpolate(f),y:0===y||y?y:(l=new eP([0,.5,1],[h.y,h.y/g*m,h.y+m-g]).interpolate(p),ej()&&u&&(l+=(window.devicePixelRatio-1)*m),l)}}(t,i,r,{anchorX:e,anchorY:s},{offsetX:o,offsetY:a});n.setDragImage(i,l.x,l.y)}}try{null==n||n.setData("application/json",{})}catch(e){}this.setCurrentDragSourceNode(e.target);let{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(i)this.beginDragNativeItem(i);else{if(n&&!n.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()&&(null==(t=this.currentNativeSource)||t.loadDataTransfer(e.dataTransfer)),!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;let{dataTransfer:r}=e,n=ex(r);n&&this.beginDragNativeItem(n,r)},this.handleTopDragEnter=e=>{let{dragEnterTargetIds:t}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:eM(e)}),t.some(e=>this.monitor.canDropOnTarget(e))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=e=>{var t;this.dragOverTargetIds=[],this.isDraggingNativeItem()&&(null==(t=this.currentNativeSource)||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{let{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=eM(e),this.scheduleHover(t),(t||[]).some(e=>this.monitor.canDropOnTarget(e))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null==(t=this.currentNativeSource)||t.loadDataTransfer(e.dataTransfer)):ex(e.dataTransfer)&&e.preventDefault(),this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{let{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:eM(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{let t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new class{get window(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}get document(){var e;return(null==(e=this.globalContext)?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null==(e=this.optionsArgs)?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new eS(this.isNodeInDocument)}}let eR=function(e,t,r){return new eN(e,t,r)};!function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"}(s||(s={}));class eq{get delay(){var e;return null!=(e=this.args.delay)?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return null!=(e=this.args.ignoreContextMenu)&&e}get enableHoverOutsideTarget(){var e;return null!=(e=this.args.enableHoverOutsideTarget)&&e}get enableKeyboardEvents(){var e;return null!=(e=this.args.enableKeyboardEvents)&&e}get enableMouseEvents(){var e;return null!=(e=this.args.enableMouseEvents)&&e}get enableTouchEvents(){var e;return null==(e=this.args.enableTouchEvents)||e}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,r,n;return null!=(n=null!=(r=null==(e=this.args)?void 0:e.delayTouchStart)?r:null==(t=this.args)?void 0:t.delay)?n:0}get delayMouseStart(){var e,t,r,n;return null!=(n=null!=(r=null==(e=this.args)?void 0:e.delayMouseStart)?r:null==(t=this.args)?void 0:t.delay)?n:0}get window(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0}get document(){var e;return(null==(e=this.context)?void 0:e.document)?this.context.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null==(e=this.args)?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}function eU(e){return void 0===e.button||0===e.button}function eB(e){return!!e.targetTouches}function eF(e,t){return eB(e)?1===e.targetTouches.length?eF(e.targetTouches[0]):t&&1===e.touches.length&&e.touches[0].target===t.target?eF(e.touches[0]):void 0:{x:e.clientX,y:e.clientY}}let eK=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get:()=>(e=!0,!0)}))}catch(e){}return e})(),eH={[s.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[s.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[s.keyboard]:{keydown:"keydown"}};class ez{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:(null==(e=this.dragOverTargetIds)?void 0:e.length)||0}}get document(){return this.options.document}setup(){let e=this.options.rootElement;e&&(f(!ez.isSetUp,"Cannot have two Touch backends at the same time."),ez.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){let e=this.options.rootElement;e&&(ez.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,r,n=!1){let i=eK?{capture:n,passive:!1}:n;this.listenerTypes.forEach(function(n){let s=eH[n][t];s&&e.addEventListener(s,r,i)})}removeEventListener(e,t,r,n=!1){let i=eK?{capture:n,passive:!1}:n;this.listenerTypes.forEach(function(n){let s=eH[n][t];s&&e.removeEventListener(s,r,i)})}connectDragSource(e,t){let r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",r)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){let r=this.options.rootElement;if(!this.document||!r)return()=>{};let n=n=>{let i;if(!this.document||!r||!this.monitor.isDragging())return;switch(n.type){case eH.mouse.move:i={x:n.clientX,y:n.clientY};break;case eH.touch.move:var s,o;i={x:(null==(s=n.touches[0])?void 0:s.clientX)||0,y:(null==(o=n.touches[0])?void 0:o.clientY)||0}}let a=null!=i?this.document.elementFromPoint(i.x,i.y):void 0,l=a&&t.contains(a);return a===t||l?this.handleMove(n,e):void 0};return this.addEventListener(this.document.body,"move",n),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",n))}}getTopMoveStartHandler(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,r){this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&function(e){let t=1===e.nodeType?e:e.parentElement;if(!t)return;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}(t)},this.handleTopMoveStartCapture=e=>{eU(e)&&(this.moveStartSourceIds=[])},this.handleMoveStart=e=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)},this.handleTopMoveStart=e=>{if(!eU(e))return;let t=eF(e);t&&(eB(e)&&(this.lastTargetTouchFallback=e.targetTouches[0]),this._mouseClientOffset=t),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e=>{if(!eU(e))return;let t=e.type===eH.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(e,t)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(t)},this.handleTopMove=e=>{var t,r;if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:n,dragOverTargetIds:i}=this,s=this.options.enableHoverOutsideTarget,o=eF(e,this.lastTargetTouchFallback);if(!o)return;if(this._isScrolling||!this.monitor.isDragging()&&function(e,t,r,n,i){if(!i)return!1;let s=180*Math.atan2(n-t,r-e)/Math.PI+180;for(let e=0;e<i.length;++e){let t=i[e];if(t&&(null==t.start||s>=t.start)&&(null==t.end||s<=t.end))return!0}return!1}(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,o.x,o.y,this.options.scrollAngleRanges))return void(this._isScrolling=!0);if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&n&&(t=this._mouseClientOffset.x||0,r=this._mouseClientOffset.y||0,Math.sqrt(Math.pow(Math.abs(o.x-t),2)+Math.pow(Math.abs(o.y-r),2))>(this.options.touchSlop?this.options.touchSlop:0))&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(n,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let a=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(a),this.actions.publishDragSource(),e.cancelable&&e.preventDefault();let l=(i||[]).map(e=>this.targetNodes.get(e)).filter(e=>!!e),u=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(o.x,o.y,l):this.document.elementsFromPoint(o.x,o.y),c=[];for(let e in u){if(!u.hasOwnProperty(e))continue;let t=u[e];for(null!=t&&c.push(t);t;)(t=t.parentElement)&&-1===c.indexOf(t)&&c.push(t)}let h=c.filter(e=>l.indexOf(e)>-1).map(e=>this._getDropTargetId(e)).filter(e=>!!e).filter((e,t,r)=>r.indexOf(e)===t);if(s)for(let e in this.targetNodes){let t=this.targetNodes.get(e);if(a&&t&&t.contains(a)&&-1===h.indexOf(e)){h.unshift(e);break}}h.reverse(),this.actions.hover(h,{clientOffset:o})},this._getDropTargetId=e=>{let t=this.targetNodes.keys(),r=t.next();for(;!1===r.done;){let n=r.value;if(e===this.targetNodes.get(n))return n;r=t.next()}},this.handleTopMoveEndCapture=e=>{this._isScrolling=!1,this.lastTargetTouchFallback=void 0,function(e){return void 0===e.buttons||0==(1&e.buttons)}(e)&&(this.monitor.isDragging()&&!this.monitor.didDrop()?(e.cancelable&&e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()):this.moveStartSourceIds=void 0)},this.handleCancelOnEscape=e=>{"Escape"===e.key&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new eq(r,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(s.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(s.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(s.keyboard)}}let eW=function(e,t={},r={}){return new ez(e,t,r)},e$="abcdefgh".split(""),eQ={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},eG={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},eV={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},eX=[7,6,5,4,3,2,1,0],eY=[0,1,2,3,4,5,6,7],eZ={wP:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsx)("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),(0,o.jsx)("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),(0,o.jsx)("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsxs)("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[(0,o.jsx)("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),(0,o.jsx)("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),(0,o.jsx)("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),(0,o.jsx)("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[(0,o.jsx)("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),(0,o.jsx)("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),(0,o.jsx)("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),(0,o.jsx)("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),(0,o.jsx)("circle",{cx:"6",cy:"12",r:"2"}),(0,o.jsx)("circle",{cx:"14",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"22.5",cy:"8",r:"2"}),(0,o.jsx)("circle",{cx:"31",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsx)("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),(0,o.jsx)("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),(0,o.jsx)("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsxs)("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[(0,o.jsx)("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),(0,o.jsx)("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),(0,o.jsx)("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),(0,o.jsx)("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[(0,o.jsx)("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),(0,o.jsx)("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),(0,o.jsx)("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),(0,o.jsx)("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),(0,o.jsx)("circle",{cx:"6",cy:"12",r:"2"}),(0,o.jsx)("circle",{cx:"14",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"22.5",cy:"8",r:"2"}),(0,o.jsx)("circle",{cx:"31",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"39",cy:"12",r:"2"}),(0,o.jsx)("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),(0,o.jsxs)("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[(0,o.jsx)("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),(0,o.jsx)("path",{d:"M 12.5,31.5 L 32.5,31.5"}),(0,o.jsx)("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),(0,o.jsx)("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),(0,o.jsx)("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),(0,o.jsx)("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function eJ(e,t,r){let n=t/8;return{x:("white"===e?eG:eV)[r[0]]*n+n/2,y:("white"===e?eX:eY)[parseInt(r[1],10)-1]*n+n/2}}function e0(e){let t=!1;return Object.keys(eQ).forEach(r=>{e[r]!==eQ[r]&&(t=!0)}),Object.keys(e).forEach(r=>{eQ[r]!==e[r]&&(t=!0)}),t}function e1(e){return"start"===e?eQ:"string"==typeof e?function(e){if(!function(e){let t=(e=(e=e.replace(/ .+$/,"")).replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")).split("/");if(8!==t.length)return!1;for(let e=0;e<8;e++)if(8!==t[e].length||-1!==t[e].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}(e))return{};let t=(e=e.replace(/ .+$/,"")).split("/"),r={},n=8;for(let e=0;e<8;e++){let s=t[e].split(""),o=0;for(let e=0;e<s.length;e++){var i;-1!==s[e].search(/[1-8]/)?o+=parseInt(s[e],10):(r[e$[o]+n]=(i=s[e]).toLowerCase()===i?"b"+i.toUpperCase():"w"+i.toUpperCase(),o+=1)}n-=1}return r}(e):e}let e5=(0,a.createContext)({}),e2=()=>(0,a.useContext)(e5),e3=(0,a.forwardRef)(({animationDuration:e=300,areArrowsAllowed:t=!0,arePiecesDraggable:r=!0,arePremovesAllowed:n=!1,boardOrientation:i="white",boardWidth:s,children:l,clearPremovesOnRightClick:u=!0,customArrows:c,customArrowColor:h="rgb(255,170,0)",customBoardStyle:d,customDarkSquareStyle:g={backgroundColor:"#B58863"},customDropSquareStyle:f={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:p={backgroundColor:"#F0D9B5"},customPieces:v,customPremoveDarkSquareStyle:m={backgroundColor:"#A42323"},customPremoveLightSquareStyle:b={backgroundColor:"#BD2828"},customSquare:y="div",customSquareStyles:S,dropOffBoardAction:O="snapback",id:w=0,isDraggablePiece:C=()=>!0,getPositionObject:_=()=>{},onArrowsChange:D=()=>{},onDragOverSquare:E=()=>{},onMouseOutSquare:k=()=>{},onMouseOverSquare:T=()=>{},onPieceClick:x=()=>{},onPieceDragBegin:I=()=>{},onPieceDragEnd:j=()=>{},onPieceDrop:P=()=>!0,onPromotionCheck:L=(e,t,r)=>("wP"===r&&"7"===e[1]&&"8"===t[1]||"bP"===r&&"2"===e[1]&&"1"===t[1])&&1>=Math.abs(e.charCodeAt(0)-t.charCodeAt(0)),onPromotionPieceSelect:M,onSquareClick:A=()=>{},onSquareRightClick:N=()=>{},position:R="start",promotionDialogVariant:q="default",promotionToSquare:U=null,showBoardNotation:B=!0,showPromotionDialog:F=!1,snapToCursor:K=!0,autoPromoteToQueen:H=!1},z)=>{let[W,$]=(0,a.useState)(e1(R)),[Q,G]=(0,a.useState)({removed:{},added:{}}),[V,X]=(0,a.useState)(void 0),[Y,Z]=(0,a.useState)(F&&!H),[J,ee]=(0,a.useState)(null),[et,er]=(0,a.useState)(U),[en,ei]=(0,a.useState)([]),es=(0,a.useRef)(en),[eo,ea]=(0,a.useState)(),[el,eu]=(0,a.useState)(Object.assign(Object.assign({},eZ),v)),[ec,eh]=(0,a.useState)(!1),[ed,eg]=(0,a.useState)(),[ef,ep]=(0,a.useState)(!1);(0,a.useImperativeHandle)(z,()=>({clearPremoves(e=!0){ew(e)}})),(0,a.useEffect)(()=>{eu(Object.assign(Object.assign({},eZ),v))},[v]),(0,a.useEffect)(()=>{Z(F),er(U)},[U,F]),(0,a.useEffect)(()=>{var t,r,i;eC();let s=e1(R),o=function(e,t){let r={removed:{},added:{}};return Object.keys(e).forEach(n=>{t[n]!==e[n]&&(r.removed[n]=e[n])}),Object.keys(t).forEach(n=>{e[n]!==t[n]&&(r.added[n]=t[n])}),r}(W,s),a=(null==(t=Object.keys(o.added))?void 0:t.length)<=2?null==(i=null==(r=Object.entries(o.added))?void 0:r[0])?void 0:i[1][0]:void 0;return ef?($(s),ep(!1),n&&eO(a),ed&&clearTimeout(ed)):ec?($(s),ep(!1),n&&eO(a)):(e0(s)&&void 0!==V?X(a):e0(s)?X(void 0):X("b"),G(o),ep(!0),eg(setTimeout(()=>{$(s),ep(!1),n&&eO(a)},e))),eh(!1),_(s),eb(),()=>{clearTimeout(ed)}},[R]);let{arrows:ev,newArrow:em,clearArrows:eb,drawNewArrow:ey,onArrowDrawEnd:eS}=((e,t=!0,r,n)=>{let[i,s]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[u,c]=(0,a.useState)();(0,a.useEffect)(()=>{Array.isArray(e)&&s(null==e?void 0:e.filter(e=>e[0]!==e[1]))},[e]),(0,a.useEffect)(()=>{null==r||r(o)},[o]);let h=[...o,...i];return{arrows:h,newArrow:u,clearArrows:function(){l([]),c(void 0)},drawNewArrow:(e,r)=>{t&&c([e,r,n])},setArrows:l,onArrowDrawEnd:(e,t)=>{let r;e!==t&&(r=h.every(([r,n])=>r!==e||n!==t)?[...o,[e,t,n]]:o.filter(([r,n])=>r!==e||n!==t),c(void 0),l(r))}}})(c,t,D,h);function eO(e){if(0===es.current.length)return;let t=es.current[0];if(void 0!==t.piece[0]&&t.piece[0]!==e&&P.length)if(X(t.piece[0]),eh(!0),P(t.sourceSq,t.targetSq,t.piece)){let e=[...es.current];e.shift(),es.current=e,ei([...e])}else ew()}function ew(e=!0){e&&X(void 0),es.current=[],ei([])}function eC(){ee(null),er(null),Z(!1)}return(0,o.jsx)(e5.Provider,Object.assign({value:{animationDuration:e,arePiecesDraggable:r,arePremovesAllowed:n,boardOrientation:i,boardWidth:s,customArrowColor:h,customBoardStyle:d,customDarkSquareStyle:g,customDropSquareStyle:f,customLightSquareStyle:p,customPremoveDarkSquareStyle:m,customPremoveLightSquareStyle:b,customSquare:y,customSquareStyles:S,id:w,isDraggablePiece:C,onDragOverSquare:E,onMouseOutSquare:k,onMouseOverSquare:T,onPieceClick:x,onPieceDragBegin:I,onPieceDragEnd:j,onPieceDrop:P,onPromotionCheck:L,onPromotionPieceSelect:M,onSquareClick:A,showBoardNotation:B,snapToCursor:K,promotionDialogVariant:q,arrows:ev,newArrow:em,onArrowDrawEnd:eS,chessPieces:el,clearArrows:eb,drawNewArrow:ey,clearCurrentRightClickDown:function(){ea(void 0)},currentPosition:W,handleSetPosition:function(e,t,r,i){if(e===t)return;if(eb(),n&&ef||n&&(V===r[0]||es.current.filter(e=>e.piece[0]===r[0]).length>0)){let n=[...es.current];return n.push({sourceSq:e,targetSq:t,piece:r}),es.current=n,ei([...n]),void eC()}if(!n&&ef)return;let s=Object.assign({},W);(eh(!!i),X(r[0]),P.length)?P(e,t,r)||ew():("trash"!==O||t||delete s[e],delete s[e],s[t]=r,$(s)),eC(),_(s)},isWaitingForAnimation:ef,lastPieceColour:V,onRightClickDown:function(e){ea(e)},onRightClickUp:function(e){if(eo){if(eo===e)return ea(void 0),u&&ew(!1),void N(e)}else ea(void 0)},positionDifferences:Q,promoteFromSquare:J,promoteToSquare:et,premoves:en,setPromoteFromSquare:ee,setPromoteToSquare:er,setShowPromoteDialog:Z,showPromoteDialog:Y,autoPromoteToQueen:H,currentRightClickDown:eo}},{children:l}))});function e4({row:e,col:t}){let{boardOrientation:r,boardWidth:n,customDarkSquareStyle:i,customLightSquareStyle:s}=e2(),a=s.backgroundColor,l=i.backgroundColor,u=0===t,c=7===e;function h(){return"white"===r?8-e:e+1}function d(){return"black"===r?e$[7-t]:e$[t]}return u&&c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),e8(n))},{children:h()})),(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),e6(n))},{children:d()}))]}):c?(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:t%2!=0?l:a}),e6(n))},{children:d()})):u?(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2==0?l:a}),e8(n))},{children:h()})):null}let e6=e=>({alignSelf:"flex-end",paddingLeft:e/8-e/48,fontSize:e/48}),e8=e=>({alignSelf:"flex-start",paddingRight:e/8-e/48,fontSize:e/48});function e7({isPremovedPiece:e=!1,piece:t,square:r,squares:i}){let{animationDuration:s,arePiecesDraggable:l,arePremovesAllowed:u,boardWidth:c,chessPieces:h,currentPosition:d,id:g,isDraggablePiece:p,isWaitingForAnimation:v,onPieceClick:m,onPieceDragBegin:b,onPieceDragEnd:y,positionDifferences:S,premoves:O}=e2(),[w,C]=(0,a.useState)({opacity:1,zIndex:5,touchAction:"none",cursor:l&&p({piece:t,sourceSquare:r})?"-webkit-grab":"default"}),[{canDrag:_,isDragging:D},E,k]=function(e,t){let r=ei(e,t);f(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let n=function(){let e=ev();return(0,a.useMemo)(()=>new ea(e),[e])}(),i=function(e,t){let r=ev(),n=(0,a.useMemo)(()=>new ef(r.getBackend()),[r]);return et(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),et(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}(r.options,r.previewOptions);return function(e,t,r){let n=ev(),i=function(e,t,r){let n=(0,a.useMemo)(()=>new em(e,t,r),[t,r]);return(0,a.useEffect)(()=>{n.spec=e},[e]),n}(e,t,r),s=(0,a.useMemo)(()=>{let t=e.type;return f(null!=t,"spec.type must be defined"),t},[e]);et(function(){if(null!=s){let[e,o]=function(e,t,r){let n=r.getRegistry(),i=n.addSource(e,t);return[i,()=>n.removeSource(i)]}(s,i,n);return t.receiveHandlerId(e),r.receiveHandlerId(e),o}},[n,t,r,i,s])}(r,n,i),[en(r.collect,n,i),(0,a.useMemo)(()=>i.hooks.dragSource(),[i]),(0,a.useMemo)(()=>i.hooks.dragPreview(),[i])]}(()=>({type:"piece",item:()=>(b(t,r),{piece:t,square:r,id:g}),end:()=>y(t,r),collect:e=>({canDrag:p({piece:t,sourceSquare:r}),isDragging:!!e.isDragging()})}),[t,r,d,g]);return k((n||((n=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),n),{captureDraggingState:!0}),(0,a.useEffect)(()=>{C(e=>Object.assign(Object.assign({},e),{opacity:+!D}))},[D]),(0,a.useEffect)(()=>{if(!u)return;let n=!1;!e&&O.find(e=>e.targetSq===r)&&(n=!0),O.find(e=>e.sourceSq===r&&e.piece===t)&&(n=!0),C(e=>Object.assign(Object.assign({},e),{display:n?"none":"unset"}))},[d,O]),(0,a.useEffect)(()=>{var t;let n=null==(t=S.removed)?void 0:t[r];if(!S.added)return;let i=Object.entries(S.added).find(([e,t])=>t===n||"P"===(null==n?void 0:n[1])&&("1"===e[1]||"8"===e[1]));if(v&&n&&i&&!e){let e=i[0];if(r&&e){let t=c/8;C(n=>Object.assign(Object.assign({},n),{transform:`translate(${(e.charCodeAt(0)-r.charCodeAt(0))*t}px, ${(Number(r[1])-Number(e[1]))*t}px)`,transition:`transform ${s}ms`,zIndex:6}))}}},[S]),(0,a.useEffect)(()=>{let{sourceSq:e}={sourceSq:i[r]};e&&C(e=>Object.assign(Object.assign({},e),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[d]),(0,a.useEffect)(()=>{C(e=>Object.assign(Object.assign({},e),{cursor:l&&p({piece:t,sourceSquare:r})?"-webkit-grab":"default"}))},[r,d,l]),(0,o.jsx)("div",Object.assign({ref:l&&_?E:null,onClick:()=>m(t),"data-piece":t,style:w},{children:"function"==typeof h[t]?h[t]({squareWidth:c/8,isDragging:D,square:r}):(0,o.jsx)("svg",Object.assign({viewBox:"1 1 43 43",width:c/8,height:c/8},{children:(0,o.jsx)("g",{children:h[t]})}))}))}function e9({square:e,squareColor:t,setSquares:r,squareHasPremove:n,children:i}){let s=(0,a.useRef)(null),{autoPromoteToQueen:l,boardWidth:u,boardOrientation:c,clearArrows:h,currentPosition:d,currentRightClickDown:g,customBoardStyle:p,customDarkSquareStyle:v,customDropSquareStyle:m,customLightSquareStyle:b,customPremoveDarkSquareStyle:y,customPremoveLightSquareStyle:S,customSquare:O,customSquareStyles:w,drawNewArrow:C,handleSetPosition:_,isWaitingForAnimation:D,lastPieceColour:E,onArrowDrawEnd:k,onDragOverSquare:T,onMouseOutSquare:x,onMouseOverSquare:I,onPieceDrop:j,onPromotionCheck:P,onRightClickDown:L,onRightClickUp:M,onSquareClick:A,setPromoteFromSquare:N,setPromoteToSquare:R,setShowPromoteDialog:q}=e2(),[{isOver:U},B]=function(e,t){let r=ei(e,t),n=function(){let e=ev();return(0,a.useMemo)(()=>new eu(e),[e])}(),i=function(e){let t=ev(),r=(0,a.useMemo)(()=>new ep(t.getBackend()),[t]);return et(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}(r.options);return function(e,t,r){let n=ev(),i=function(e,t){let r=(0,a.useMemo)(()=>new eb(e,t),[t]);return(0,a.useEffect)(()=>{r.spec=e},[e]),r}(e,t),s=function(e){let{accept:t}=e;return(0,a.useMemo)(()=>(f(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}(e);et(function(){let[e,o]=function(e,t,r){let n=r.getRegistry(),i=n.addTarget(e,t);return[i,()=>n.removeTarget(i)]}(s,i,n);return t.receiveHandlerId(e),r.receiveHandlerId(e),o},[n,t,i,r,s.map(e=>e.toString()).join("|")])}(r,n,i),[en(r.collect,n,i),(0,a.useMemo)(()=>i.hooks.dropTarget(),[i])]}(()=>({accept:"piece",drop:F,collect:e=>({isOver:!!e.isOver()})}),[e,d,j,D,E]);function F(t){P(t.square,e,t.piece)?l?_(t.square,e,"w"===t.piece[0]?"wQ":"bQ"):(N(t.square),R(e),q(!0)):_(t.square,e,t.piece,!0)}(0,a.useEffect)(()=>{if(s.current){let{x:t,y:n}=s.current.getBoundingClientRect();r(r=>Object.assign(Object.assign({},r),{[e]:{x:t,y:n}}))}},[u,c]);let K=Object.assign(Object.assign(Object.assign(Object.assign({},tr(e,c,p)),"black"===t?v:b),n&&("black"===t?y:S)),U&&m);return(0,o.jsx)("div",Object.assign({ref:B,style:K,"data-square-color":t,"data-square":e,onMouseOver:t=>{2===t.buttons&&g&&C(g,e),t.relatedTarget&&t.currentTarget.contains(t.relatedTarget)||I(e)},onMouseOut:t=>{t.relatedTarget&&t.currentTarget.contains(t.relatedTarget)||x(e)},onMouseDown:t=>{2===t.button&&L(e)},onMouseUp:t=>{2===t.button&&(g&&k(g,e),M(e))},onDragEnter:()=>T(e),onClick:()=>{A(e),h()},onContextMenu:e=>{e.preventDefault()}},{children:(0,o.jsx)(O,"string"==typeof O?Object.assign({ref:s,style:Object.assign(Object.assign(Object.assign({},tt(u)),te),!n&&(null==w?void 0:w[e]))},{children:i}):Object.assign({ref:s,square:e,squareColor:t,style:Object.assign(Object.assign(Object.assign({},tt(u)),te),!n&&(null==w?void 0:w[e]))},{children:i}))}))}let te={display:"flex",justifyContent:"center"},tt=e=>({width:e/8,height:e/8}),tr=(e,t,r)=>(null==r?void 0:r.borderRadius)?"a1"===e?"white"===t?{borderBottomLeftRadius:r.borderRadius}:{borderTopRightRadius:r.borderRadius}:"a8"===e?"white"===t?{borderTopLeftRadius:r.borderRadius}:{borderBottomRightRadius:r.borderRadius}:"h1"===e?"white"===t?{borderBottomRightRadius:r.borderRadius}:{borderTopLeftRadius:r.borderRadius}:"h8"===e?"white"===t?{borderTopRightRadius:r.borderRadius}:{borderBottomLeftRadius:r.borderRadius}:{}:{};function tn(){let[e,t]=(0,a.useState)({}),{boardOrientation:r,boardWidth:n,currentPosition:i,id:s,premoves:l,showBoardNotation:u}=e2();return(0,o.jsx)("div",Object.assign({"data-boardid":s},{children:[...Array(8)].map((s,a)=>(0,o.jsx)("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:n}},{children:[...Array(8)].map((n,s)=>{let c="black"===r?e$[7-s]+(a+1):e$[s]+(8-a),h=s%2==a%2?"white":"black",d=l.find(e=>e.sourceSq===c||e.targetSq===c),g=l.find(e=>e.targetSq===c);return(0,o.jsxs)(e9,Object.assign({square:c,squareColor:h,setSquares:t,squareHasPremove:!!d},{children:[i[c]&&(0,o.jsx)(e7,{piece:i[c],square:c,squares:e}),g&&(0,o.jsx)(e7,{isPremovedPiece:!0,piece:g.piece,square:c,squares:e}),u&&(0,o.jsx)(e4,{row:a,col:s})]}),`${s}${a}`)})}),a.toString()))}))}let ti=()=>{let{arrows:e,newArrow:t,boardOrientation:r,boardWidth:n,customArrowColor:i}=e2(),s=[...e,t].filter(Boolean);return(0,o.jsx)("svg",Object.assign({width:n,height:n,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:s.map((t,s)=>{let[l,u,c]=t;if(l===u)return null;let h=eJ(r,n,l),d=eJ(r,n,u),g=n/32,f=s===e.length;e.some(e=>e[0]!==l&&e[1]===u)&&!f&&(g=n/16);let p=d.x-h.x,v=d.y-h.y,m=Math.hypot(v,p),b={x:h.x+p*(m-g)/m,y:h.y+v*(m-g)/m};return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)("marker",Object.assign({id:`arrowhead-${s}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:(0,o.jsx)("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:null!=c?c:i})})),(0,o.jsx)("line",{x1:h.x,y1:h.y,x2:b.x,y2:b.y,opacity:f?"0.5":"0.65",stroke:null!=c?c:i,strokeWidth:f?.9*n/40:n/40,markerEnd:`url(#arrowhead-${s})`})]},`${l}-${u}${f?"-active":""}`)})}))};function ts({option:e}){let[t,r]=(0,a.useState)(!1),{boardWidth:n,chessPieces:i,customDarkSquareStyle:s,customLightSquareStyle:l,handleSetPosition:u,onPromotionPieceSelect:c,promoteFromSquare:h,promoteToSquare:d,promotionDialogVariant:g}=e2(),f=()=>{switch(e[1]){case"Q":return s.backgroundColor;case"R":return l.backgroundColor;case"N":return"default"===g?l.backgroundColor:s.backgroundColor;case"B":return"default"===g?s.backgroundColor:l.backgroundColor}};return(0,o.jsx)("div",Object.assign({onClick:()=>{(null==c?void 0:c.length)?c(e):u(h,d,e,!0)},onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),"data-piece":e,style:{cursor:"pointer",backgroundColor:t?f():`${f()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:"function"==typeof i[e]?(0,o.jsx)("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:t?"scale(1)":"scale(0.85)"}},{children:i[e]({squareWidth:n/8,isDragging:!1})})):(0,o.jsx)("svg",Object.assign({viewBox:"1 1 43 43",width:n/8,height:n/8,style:{transition:"all 0.1s ease-out",transform:t?"scale(1)":"scale(0.85)"}},{children:(0,o.jsx)("g",{children:i[e]})}))}))}function to(){let{boardOrientation:e,boardWidth:t,promotionDialogVariant:r,promoteToSquare:n}=e2(),i="1"===(null==n?void 0:n[1])?"b":"w",s=[`${null!=i?i:"w"}Q`,`${null!=i?i:"w"}R`,`${null!=i?i:"w"}N`,`${null!=i?i:"w"}B`],a={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-t/8}px, ${-t/8}px)`},vertical:{transform:`translate(${-t/16}px, ${-t/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*t/8}px)`,width:"100%",height:t/4+"px",top:0,backgroundColor:"white",left:0}},l=eJ(e,t,n||"a8");return(0,o.jsx)("div",Object.assign({style:Object.assign({position:"absolute",top:`${null==l?void 0:l.y}px`,left:`${null==l?void 0:l.x}px`,zIndex:1e3},a[r]),title:"Choose promotion piece"},{children:s.map(e=>(0,o.jsx)(ts,{option:e},e))}))}let ta={whiteKing:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:(0,o.jsx)("g",{children:(0,o.jsx)("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function tl({children:e}){try{return(0,o.jsx)(o.Fragment,{children:e})}catch(e){return console.log(e),(0,o.jsx)(tu,{showError:!0})}}function tu({showError:e=!1}){return(0,o.jsxs)("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[(0,o.jsx)("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:ta.whiteKing})),e&&(0,o.jsx)("h1",{children:"Something went wrong"})]}))}function tc(){let e=(0,a.useRef)(null),{boardWidth:t,clearCurrentRightClickDown:r,onPromotionPieceSelect:n,setShowPromoteDialog:i,showPromoteDialog:s,customBoardStyle:l}=e2();return(0,a.useEffect)(()=>{function t(t){e.current&&!e.current.contains(t.target)&&r()}return document.addEventListener("mouseup",t),()=>{document.removeEventListener("mouseup",t)}},[]),t?(0,o.jsx)("div",Object.assign({style:{perspective:"1000px"}},{children:(0,o.jsxs)("div",Object.assign({ref:e,style:Object.assign(Object.assign({position:"relative"},th(t)),l)},{children:[(0,o.jsx)(tn,{}),(0,o.jsx)(ti,{}),s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{onClick:()=>{i(!1),null==n||n()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:t,height:t}}),(0,o.jsx)(to,{})]})]}))})):(0,o.jsx)(tu,{})}let th=e=>({cursor:"default",height:e,width:e});function td(){let{boardWidth:e,chessPieces:t,id:r,snapToCursor:n}=e2(),{isDragging:i,item:s,clientOffset:l,sourceClientOffset:u}=function(e){let t=ev().getMonitor(),[r,n]=er(t,e);return(0,a.useEffect)(()=>t.subscribeToOffsetChange(n)),(0,a.useEffect)(()=>t.subscribeToStateChange(n)),r}(e=>({item:e.getItem(),clientOffset:e.getClientOffset(),sourceClientOffset:e.getSourceClientOffset(),isDragging:e.isDragging()})),c=(0,a.useCallback)((t,r)=>{if(!t||!r)return{display:"none"};let{x:i,y:s}=n?t:r;if(n){let t=e/8/2;i-=t,s-=t}let o=`translate(${i}px, ${s}px)`;return{transform:o,WebkitTransform:o,touchAction:"none"}},[e,n]);return i&&s.id===r?(0,o.jsx)("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:(0,o.jsx)("div",Object.assign({style:c(l,u)},{children:"function"==typeof t[s.piece]?t[s.piece]({squareWidth:e/8,isDragging:!0}):(0,o.jsx)("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:(0,o.jsx)("g",{children:t[s.piece]})}))}))})):null}let tg=(0,a.forwardRef)((e,t)=>{let{customDndBackend:r,customDndBackendOptions:n}=e,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["customDndBackend","customDndBackendOptions"]),[s,l]=(0,a.useState)(),[u,c]=(0,a.useState)(!1),[h,d]=(0,a.useState)(!1),[g,f]=(0,a.useState)(e.boardWidth),p=(0,a.useRef)(null);return(0,a.useEffect)(()=>{d("ontouchstart"in window),c(!0),l(window)},[]),(0,a.useEffect)(()=>{var t;if(void 0===e.boardWidth&&(null==(t=p.current)?void 0:t.offsetWidth)){let e=new ResizeObserver(()=>{var e;f(null==(e=p.current)?void 0:e.offsetWidth)});return e.observe(p.current),()=>{e.disconnect()}}},[p.current,s]),u&&s?(0,o.jsx)(tl,{children:(0,o.jsxs)("div",Object.assign({style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[(0,o.jsx)("div",{ref:p,style:{width:"100%"}}),(0,o.jsx)(Z,Object.assign({backend:r||(h?eW:eR),context:s,options:r?n:void 0},{children:g&&(0,o.jsxs)(e3,Object.assign({boardWidth:g},i,{ref:t},{children:[(0,o.jsx)(td,{}),(0,o.jsx)(tc,{})]}))}))]}))}):null})},4077:(e,t,r)=>{function n(e,t,r,i){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,n.prototype),s.expected=t,s.found=r,s.location=i,s.name="SyntaxError",s}function i(e,t,r){return(r=r||" ",e.length>t)?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}function s(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function o(e,t){return e*t&0xffffffffffffffffn}r.d(t,{d$:()=>M}),!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(n,Error),n.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,a=this.location.source+":"+o.line+":"+o.column;if(n){var l=this.location.end,u=i("",o.line.toString().length," "),c=n[s.line-1],h=(s.line===l.line?l.column:c.length+1)-s.column||1;t+="\n --\x3e "+a+"\n"+u+" |\n"+o.line+" | "+c+"\n"+u+" | "+i("",s.column-1," ")+i("",h,"^")}else t+="\n at "+a}return t},n.buildMessage=function(e,t){var r={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map(function(e){return Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)});return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function o(e){return r[e.type](e)}return"Expected "+function(e){var t,r,n=e.map(o);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+(t?'"'+i(t)+'"':"end of input")+" found."};let a=function(e){return function(){let t=BigInt(0xffffffffffffffffn&e),r=BigInt(e>>64n&0xffffffffffffffffn),n=o(s(o(t,5n),7n),9n);return r^=t,t=(s(t,24n)^r^r<<16n)&0xffffffffffffffffn,e=(r=s(r,37n))<<64n|t,n}}(0xa187eb39cdcaed8f31c4b365b102e01en),l=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>a()))),u=Array.from({length:8},()=>a()),c=Array.from({length:16},()=>a()),h=a(),d="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class g{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){let{color:r,piece:n,from:i,to:s,flags:o,captured:a,promotion:l}=t,u=x(i),c=x(s);for(let i in this.color=r,this.piece=n,this.from=u,this.to=c,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=u+c,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="",p)p[i]&o&&(this.flags+=f[i]);a&&(this.captured=a),l&&(this.promotion=l,this.lan+=l)}isCapture(){return this.flags.indexOf(f.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(f.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(f.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(f.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(f.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(f.BIG_PAWN)>-1}}let f={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},p={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},v={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},m={...v,WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},b={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},y={b:[16,32,17,15],w:[-16,-32,-17,-15]},S={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},O=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],w=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],C={p:1,n:2,b:4,r:8,q:16,k:32},_=["n","b","r","q"],D={k:p.KSIDE_CASTLE,q:p.QSIDE_CASTLE},E={w:[{square:b.a1,flag:p.QSIDE_CASTLE},{square:b.h1,flag:p.KSIDE_CASTLE}],b:[{square:b.a8,flag:p.QSIDE_CASTLE},{square:b.h8,flag:p.KSIDE_CASTLE}]},k={b:1,w:6};function T(e){return -1!=="0123456789".indexOf(e)}function x(e){let t=15&e,r=e>>4;return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function I(e){return"w"===e?"b":"w"}function j(e,t,r,n,i,s,o=p.NORMAL){let a=n>>4;if("p"===i&&(7===a||0===a))for(let a=0;a<_.length;a++){let l=_[a];e.push({color:t,from:r,to:n,piece:i,captured:s,promotion:l,flags:o|p.PROMOTION})}else e.push({color:t,from:r,to:n,piece:i,captured:s,flags:o})}function P(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return"p"}return"o"===(t=t.toLowerCase())?"k":t}function L(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class M{_board=Array(128);_turn="w";_header={};_kings={w:-1,b:-1};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=d,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=Array(128),this._kings={w:-1,b:-1},this._turn="w",this._castling={w:0,b:0},this._epSquare=-1,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...m},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let n=e.split(/\s+/);if(n.length>=2&&n.length<6&&(e=n.concat(["-","-","0","1"].slice(-(6-n.length))).join(" ")),n=e.split(/\s+/),!t){let{ok:t,error:r}=function(e){let t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};let r=parseInt(t[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};let n=parseInt(t[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};let i=t[0].split("/");if(8!==i.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<i.length;e++){let t=0,r=!1;for(let n=0;n<i[e].length;n++)if(T(i[e][n])){if(r)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(i[e][n],10),r=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[e][n]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,r=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};for(let{color:e,regex:r}of[{color:"white",regex:/K/g},{color:"black",regex:/k/g}]){if(!r.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(r)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return Array.from(i[0]+i[7]).some(e=>"P"===e.toUpperCase())?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}(e);if(!t)throw Error(r)}let i=n[0],s=0;this.clear({preserveHeaders:r});for(let e=0;e<i.length;e++){let t=i.charAt(e);if("/"===t)s+=8;else if(T(t))s+=parseInt(t,10);else{let e=t<"a"?"w":"b";this._put({type:t.toLowerCase(),color:e},x(s)),s++}}this._turn=n[1],n[2].indexOf("K")>-1&&(this._castling.w|=p.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this._castling.w|=p.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this._castling.b|=p.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this._castling.b|=p.QSIDE_CASTLE),this._epSquare="-"===n[3]?-1:b[n[3]],this._halfMoves=parseInt(n[4],10),this._moveNumber=parseInt(n[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,r="";for(let e=b.a8;e<=b.h1;e++){if(this._board[e]){t>0&&(r+=t,t=0);let{color:n,type:i}=this._board[e];r+="w"===n?i.toUpperCase():i.toLowerCase()}else t++;e+1&136&&(t>0&&(r+=t),e!==b.h1&&(r+="/"),t=0,e+=8)}let n="";this._castling.w&p.KSIDE_CASTLE&&(n+="K"),this._castling.w&p.QSIDE_CASTLE&&(n+="Q"),this._castling.b&p.KSIDE_CASTLE&&(n+="k"),this._castling.b&p.QSIDE_CASTLE&&(n+="q"),n=n||"-";let i="-";if(-1!==this._epSquare)if(e)i=x(this._epSquare);else{let e=this._epSquare+("w"===this._turn?16:-16);for(let t of[e+1,e-1]){if(136&t)continue;let e=this._turn;if(this._board[t]?.color===e&&this._board[t]?.type==="p"){this._makeMove({color:e,from:t,to:this._epSquare,piece:"p",captured:"p",flags:p.EP_CAPTURE});let r=!this._isKingAttacked(e);if(this._undoMove(),r){i=x(this._epSquare);break}}}}return[r,this._turn,n,i,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;let{color:t,type:r}=this._board[e];return l[({w:0,b:1})[t]][({p:0,n:1,b:2,r:3,q:4,k:5})[r]][e]}_epKey(){return -1===this._epSquare?0n:u[7&this._epSquare]}_castlingKey(){return c[this._castling.w>>5|this._castling.b>>3]}_computeHash(){let e=0n;for(let t=b.a8;t<=b.h1;t++){if(136&t){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),"b"===this._turn&&(e^=h),e}_updateSetup(e){this._history.length>0||(e!==d?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(d)}get(e){return this._board[b[e]]}findPiece(e){let t=[];for(let r=b.a8;r<=b.h1;r++){if(136&r){r+=7;continue}this._board[r]&&this._board[r]?.color===e.color&&this._board[r].color===e.color&&this._board[r].type===e.type&&t.push(x(r))}return t}put({type:e,color:t},r){return!!this._put({type:e,color:t},r)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},r){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase())||!(r in b))return!1;let n=b[r];if("k"==e&&-1!=this._kings[t]&&this._kings[t]!=n)return!1;let i=this._board[n];return i&&"k"===i.type&&(this._kings[i.color]=-1),this._set(n,{type:e,color:t}),"k"===e&&(this._kings[t]=n),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){let t=this.get(e);return this._clear(b[e]),t&&"k"===t.type&&(this._kings[t.color]=-1),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();let e=this._board[b.e1]?.type==="k"&&this._board[b.e1]?.color==="w",t=this._board[b.e8]?.type==="k"&&this._board[b.e8]?.color==="b";e&&this._board[b.a1]?.type==="r"&&this._board[b.a1]?.color==="w"||(this._castling.w&=-65),e&&this._board[b.h1]?.type==="r"&&this._board[b.h1]?.color==="w"||(this._castling.w&=-33),t&&this._board[b.a8]?.type==="r"&&this._board[b.a8]?.color==="b"||(this._castling.b&=-65),t&&this._board[b.h8]?.type==="r"&&this._board[b.h8]?.color==="b"||(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(-1===this._epSquare)return;let e=this._epSquare+("w"===this._turn?-16:16),t=this._epSquare+("w"===this._turn?16:-16);if(null!==this._board[e]||null!==this._board[this._epSquare]||this._board[t]?.color!==I(this._turn)||this._board[t]?.type!=="p"){this._hash^=this._epKey(),this._epSquare=-1;return}[t+1,t-1].some(e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type==="p")||(this._hash^=this._epKey(),this._epSquare=-1)}_attacked(e,t,r){let n=[];for(let i=b.a8;i<=b.h1;i++){if(136&i){i+=7;continue}if(void 0===this._board[i]||this._board[i].color!==e)continue;let s=this._board[i],o=i-t;if(0===o)continue;let a=o+119;if(O[a]&C[s.type]){if("p"===s.type){if(o>0&&"w"===s.color||o<=0&&"b"===s.color)if(!r)return!0;else n.push(x(i));continue}if("n"===s.type||"k"===s.type)if(!r)return!0;else{n.push(x(i));continue}let e=w[a],l=i+e,u=!1;for(;l!==t;){if(null!=this._board[l]){u=!0;break}l+=e}if(!u)if(!r)return!0;else{n.push(x(i));continue}}}return!!r&&n}attackers(e,t){return t?this._attacked(t,b[e],!0):this._attacked(this._turn,b[e],!0)}_isKingAttacked(e){let t=this._kings[e];return -1!==t&&this._attacked(I(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,b[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){let e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],r=0,n=0;for(let i=b.a8;i<=b.h1;i++){if(n=(n+1)%2,136&i){i+=7;continue}let s=this._board[i];s&&(e[s.type]=s.type in e?e[s.type]+1:1,"b"===s.type&&t.push(n),r++)}if(2===r||3===r&&(1===e.b||1===e.n))return!0;if(r===e.b+2){let e=0,r=t.length;for(let n=0;n<r;n++)e+=t[n];if(0===e||e===r)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:r}={}){let n=this._moves({square:t,piece:r});return e?n.map(e=>new g(this,e)):n.map(e=>this._moveToSan(e,n))}_moves({legal:e=!0,piece:t,square:r}={}){let n=r?r.toLowerCase():void 0,i=t?.toLowerCase(),s=[],o=this._turn,a=I(o),l=b.a8,u=b.h1,c=!1;if(n)if(!(n in b))return[];else l=u=b[n],c=!0;for(let e=l;e<=u;e++){let t;if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===a)continue;let{type:r}=this._board[e];if("p"===r){if(i&&i!==r)continue;t=e+y[o][0],!this._board[t]&&(j(s,o,e,t,"p"),t=e+y[o][1],k[o]!==e>>4||this._board[t]||j(s,o,e,t,"p",void 0,p.BIG_PAWN));for(let r=2;r<4;r++)136&(t=e+y[o][r])||(this._board[t]?.color===a?j(s,o,e,t,"p",this._board[t].type,p.CAPTURE):t===this._epSquare&&j(s,o,e,t,"p","p",p.EP_CAPTURE))}else{if(i&&i!==r)continue;for(let n=0,i=S[r].length;n<i;n++){let i=S[r][n];for(t=e;!(136&(t+=i));){if(this._board[t]){if(this._board[t].color===o)break;j(s,o,e,t,r,this._board[t].type,p.CAPTURE);break}if(j(s,o,e,t,r),"n"===r||"k"===r)break}}}}if((void 0===i||"k"===i)&&(!c||u===this._kings[o])){if(this._castling[o]&p.KSIDE_CASTLE){let e=this._kings[o],t=e+2;this._board[e+1]||this._board[t]||this._attacked(a,this._kings[o])||this._attacked(a,e+1)||this._attacked(a,t)||j(s,o,this._kings[o],t,"k",void 0,p.KSIDE_CASTLE)}if(this._castling[o]&p.QSIDE_CASTLE){let e=this._kings[o],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(a,this._kings[o])||this._attacked(a,e-1)||this._attacked(a,t)||j(s,o,this._kings[o],t,"k",void 0,p.QSIDE_CASTLE)}}if(!e||-1===this._kings[o])return s;let h=[];for(let e=0,t=s.length;e<t;e++)this._makeMove(s[e]),this._isKingAttacked(o)||h.push(s[e]),this._undoMove();return h}move(e,{strict:t=!1}={}){let r=null;if("string"==typeof e)r=this._moveFromSan(e,t);else if(null===e)r=this._moveFromSan("--",t);else if("object"==typeof e){let t=this._moves();for(let n=0,i=t.length;n<i;n++)if(e.from===x(t[n].from)&&e.to===x(t[n].to)&&(!("promotion"in t[n])||e.promotion===t[n].promotion)){r=t[n];break}}if(!r)if("string"==typeof e)throw Error(`Invalid move: ${e}`);else throw Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&p.NULL_MOVE)throw Error("Null move not allowed when in check");let n=new g(this,r);return this._makeMove(r),this._incPositionCount(),n}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){let t=this._turn,r=I(t);if(this._push(e),e.flags&p.NULL_MOVE){"b"===t&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=-1;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&p.EP_CAPTURE&&("b"===this._turn?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),"k"===this._board[e.to].type){if(this._kings[t]=e.to,e.flags&p.KSIDE_CASTLE){let t=e.to-1,r=e.to+1;this._movePiece(r,t)}else if(e.flags&p.QSIDE_CASTLE){let t=e.to+1,r=e.to-2;this._movePiece(r,t)}this._castling[t]=0}if(this._castling[t]){for(let r=0,n=E[t].length;r<n;r++)if(e.from===E[t][r].square&&this._castling[t]&E[t][r].flag){this._castling[t]^=E[t][r].flag;break}}if(this._castling[r]){for(let t=0,n=E[r].length;t<n;t++)if(e.to===E[r][t].square&&this._castling[r]&E[r][t].flag){this._castling[r]^=E[r][t].flag;break}}if(this._hash^=this._castlingKey(),e.flags&p.BIG_PAWN){let n;n="b"===t?e.to-16:e.to+16,(e.to-1&136||this._board[e.to-1]?.type!=="p"||this._board[e.to-1]?.color!==r)&&(e.to+1&136||this._board[e.to+1]?.type!=="p"||this._board[e.to+1]?.color!==r)?this._epSquare=-1:(this._epSquare=n,this._hash^=this._epKey())}else this._epSquare=-1;"p"===e.piece||e.flags&(p.CAPTURE|p.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,"b"===t&&this._moveNumber++,this._turn=r,this._hash^=h}undo(){let e=this._hash,t=this._undoMove();if(t){let r=new g(this,t);return this._decPositionCount(e),r}return null}_undoMove(){let e=this._history.pop();if(void 0===e)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();let t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=h;let r=this._turn,n=I(r);if(t.flags&p.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:r})),t.captured)if(t.flags&p.EP_CAPTURE){let e;e="b"===r?t.to-16:t.to+16,this._set(e,{type:"p",color:n})}else this._set(t.to,{type:t.captured,color:n});if(t.flags&(p.KSIDE_CASTLE|p.QSIDE_CASTLE)){let e,r;t.flags&p.KSIDE_CASTLE?(e=t.to+1,r=t.to-1):(e=t.to-2,r=t.to+1),this._movePiece(r,e)}return t}pgn({newline:e="\n",maxWidth:t=0}={}){let r=[],n=!1;for(let t in this._header)this._header[t]&&r.push(`[${t} "${this._header[t]}"]`+e),n=!0;n&&this._history.length&&r.push(e);let i=e=>{let t=this._comments[this.fen()];if(void 0!==t){let r=e.length>0?" ":"";e=`${e}${r}{${t}}`}return e},s=[];for(;this._history.length>0;)s.push(this._undoMove());let o=[],a="";for(0===s.length&&o.push(i(""));s.length>0;){a=i(a);let e=s.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(a.length&&o.push(a),a=this._moveNumber+".");else{let e=`${this._moveNumber}. ...`;a=a?`${a} ${e}`:e}a=a+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(a.length&&o.push(i(a)),o.push(this._header.Result||"*"),0===t)return r.join("")+o.join(" ");let l=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},u=0;for(let n=0;n<o.length;n++){if(u+o[n].length>t&&o[n].includes("{")){u=function(n,i){for(let s of i.split(" "))if(s){if(n+s.length>t){for(;l();)n--;r.push(e),n=0}r.push(s),n+=s.length,r.push(" "),n++}return l()&&n--,n}(u,o[n]);continue}u+o[n].length>t&&0!==n?(" "===r[r.length-1]&&r.pop(),r.push(e),u=0):0!==n&&(r.push(" "),u++),r.push(o[n]),u+=o[n].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??v[e]??null,this.getHeaders()}removeHeader(e){return e in this._header&&(this._header[e]=v[e]||null,!0)}getHeaders(){let e={};for(let[t,r]of Object.entries(this._header))null!==r&&(e[t]=r);return e}loadPgn(e,{strict:t=!1,newlineChar:r="\r?\n"}={}){"\r?\n"!==r&&(e=e.replace(RegExp(r,"g"),"\n"));let i=function(e,t){var r,i,s,o,a={},l=(t=void 0!==t?t:{}).grammarSource,u={pgn:e_},c=e_,h="O-O-O",d="0-0-0",g="1/2-1/2",f=/^[a-zA-Z]/,p=/^[^"]/,v=/^[0-9]/,m=/^[.]/,b=/^[a-zA-Z1-8\-=]/,y=/^[+#]/,S=/^[!?]/,O=/^[^}]/,w=/^[^\r\n]/,C=/^[ \t\r\n]/,_=eS("tag pair"),D=eb("[",!1),E=eb('"',!1),k=eb("]",!1),T=eS("tag name"),x=ey([["a","z"],["A","Z"]],!1,!1),I=eS("tag value"),j=ey(['"'],!0,!1),P=eS("move number"),L=ey([["0","9"]],!1,!1),M=eb(".",!1),A=ey(["."],!1,!1),N=eS("standard algebraic notation"),R=eb("O-O-O",!1),q=eb("O-O",!1),U=eb("0-0-0",!1),B=eb("0-0",!1),F=ey([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),K=ey(["+","#"],!1,!1),H=eS("suffix annotation"),z=ey(["!","?"],!1,!1),W=eS("NAG"),$=eb("$",!1),Q=eS("brace comment"),G=eb("{",!1),V=ey(["}"],!0,!1),X=eb("}",!1),Y=eS("rest of line comment"),Z=eb(";",!1),J=ey(["\r","\n"],!0,!1),ee=eS("variation"),et=eb("(",!1),er=eb(")",!1),en=eS("game termination marker"),ei=eb("1-0",!1),es=eb("0-1",!1),eo=eb("1/2-1/2",!1),ea=eb("*",!1),el=eS("whitespace"),eu=ey([" ","	","\r","\n"],!1,!1),ec=function(e,t){if(t.marker&&t.marker.comment){let e=t.root;for(;;){let r=e.variations[0];if(!r){e.comment=t.marker.comment;break}e=r}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}},eh=function(e,t){return function(...e){let[t,...r]=e,n=t;for(let e of r)null!==e&&(n.variations=[e,...e.variations],e.variations=[],n=e);return t}(null!==e?{comment:e,variations:[]}:{variations:[]},...t.flat())},ed=function(e,t,r,n,i){let s={move:e,variations:i};return t&&(s.suffix=t),r&&(s.nag=r),null!==n&&(s.comment=n),s},eg=0|t.peg$currPos,ef=[{line:1,column:1}],ep=eg,ev=t.peg$maxFailExpected||[],em=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in u))throw Error("Can't start parsing from rule \""+t.startRule+'".');c=u[t.startRule]}function eb(e,t){return{type:"literal",text:e,ignoreCase:t}}function ey(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function eS(e){return{type:"other",description:e}}function eO(t){var r,n=ef[t];if(n)return n;if(t>=ef.length)r=ef.length-1;else for(r=t;!ef[--r];);for(n={line:(n=ef[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return ef[t]=n,n}function ew(e,t,r){var n=eO(e),i=eO(t);return{source:l,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:i.line,column:i.column}}}function eC(e){eg<ep||(eg>ep&&(ep=eg,ev=[]),ev.push(e))}function e_(){var t;return t=function(){var e,t;for(e=[],t=eD();t!==a;)e.push(t),t=eD();return t=ej(),Object.fromEntries(e)}(),ec(t,function(){var t,r,n,i,s;return t=eE(),ej(),(em++,n=eg,"1-0"===e.substr(eg,3)?(i="1-0",eg+=3):(i=a,0===em&&eC(ei)),i===a&&("0-1"===e.substr(eg,3)?(i="0-1",eg+=3):(i=a,0===em&&eC(es)),i===a&&(e.substr(eg,7)===g?(i=g,eg+=7):(i=a,0===em&&eC(eo)),i===a&&(42===e.charCodeAt(eg)?(i="*",eg++):(i=a,0===em&&eC(ea))))),i!==a)?(ej(),(s=ex())===a&&(s=null),n={result:i,comment:s}):(eg=n,n=a),em--,n===a&&(i=a,0===em&&eC(en)),(r=n)===a&&(r=null),ej(),{root:t,marker:r}}())}function eD(){var t,r,n,i,s,o,l;return(em++,t=eg,ej(),91===e.charCodeAt(eg)?(r="[",eg++):(r=a,0===em&&eC(D)),r!==a&&(ej(),(n=function(){var t,r,n;if(em++,t=eg,r=[],n=e.charAt(eg),f.test(n)?eg++:(n=a,0===em&&eC(x)),n!==a)for(;n!==a;)r.push(n),n=e.charAt(eg),f.test(n)?eg++:(n=a,0===em&&eC(x));else r=a;return t=r!==a?e.substring(t,eg):r,em--,t===a&&(r=a,0===em&&eC(T)),t}())!==a&&(ej(),34===e.charCodeAt(eg)?(i='"',eg++):(i=a,0===em&&eC(E)),i!==a&&(s=function(){var t,r,n;for(em++,t=eg,r=[],n=e.charAt(eg),p.test(n)?eg++:(n=a,0===em&&eC(j));n!==a;)r.push(n),n=e.charAt(eg),p.test(n)?eg++:(n=a,0===em&&eC(j));return t=e.substring(t,eg),em--,r=a,0===em&&eC(I),t}(),34===e.charCodeAt(eg)?(o='"',eg++):(o=a,0===em&&eC(E)),o!==a&&(ej(),93===e.charCodeAt(eg)?(l="]",eg++):(l=a,0===em&&eC(k)),l!==a)))))?t=[n,s]:(eg=t,t=a),em--,t===a&&0===em&&eC(_),t}function eE(){var e,t,r;for((e=ex())===a&&(e=null),t=[],r=ek();r!==a;)t.push(r),r=ek();return eh(e,t)}function ek(){var t,r,n,i,s,o,l,u;if(t=eg,ej(),function(){var t,r,n,i,s,o;for(em++,t=eg,r=[],n=e.charAt(eg),v.test(n)?eg++:(n=a,0===em&&eC(L));n!==a;)r.push(n),n=e.charAt(eg),v.test(n)?eg++:(n=a,0===em&&eC(L));if(46===e.charCodeAt(eg)?(n=".",eg++):(n=a,0===em&&eC(M)),n!==a){for(i=ej(),s=[],o=e.charAt(eg),m.test(o)?eg++:(o=a,0===em&&eC(A));o!==a;)s.push(o),o=e.charAt(eg),m.test(o)?eg++:(o=a,0===em&&eC(A));t=r=[r,n,i,s]}else eg=t,t=a;em--,t===a&&(r=a,0===em&&eC(P))}(),ej(),(r=function(){var t,r,n,i,s,o;if(em++,t=eg,r=eg,e.substr(eg,5)===h?(n=h,eg+=5):(n=a,0===em&&eC(R)),n===a&&("O-O"===e.substr(eg,3)?(n="O-O",eg+=3):(n=a,0===em&&eC(q)),n===a&&(e.substr(eg,5)===d?(n=d,eg+=5):(n=a,0===em&&eC(U)),n===a))&&("0-0"===e.substr(eg,3)?(n="0-0",eg+=3):(n=a,0===em&&eC(B)),n===a))if(n=eg,i=e.charAt(eg),f.test(i)?eg++:(i=a,0===em&&eC(x)),i!==a){if(s=[],o=e.charAt(eg),b.test(o)?eg++:(o=a,0===em&&eC(F)),o!==a)for(;o!==a;)s.push(o),o=e.charAt(eg),b.test(o)?eg++:(o=a,0===em&&eC(F));else s=a;s!==a?n=i=[i,s]:(eg=n,n=a)}else eg=n,n=a;return n!==a?(i=e.charAt(eg),y.test(i)?eg++:(i=a,0===em&&eC(K)),i===a&&(i=null),r=n=[n,i]):(eg=r,r=a),t=r!==a?e.substring(t,eg):r,em--,t===a&&(r=a,0===em&&eC(N)),t}())!==a){for((n=function(){var t,r,n;for(em++,t=eg,r=[],n=e.charAt(eg),S.test(n)?eg++:(n=a,0===em&&eC(z));n!==a;)r.push(n),r.length>=2?n=a:(n=e.charAt(eg),S.test(n)?eg++:(n=a,0===em&&eC(z)));return r.length<1?(eg=t,t=a):t=r,em--,t===a&&(r=a,0===em&&eC(H)),t}())===a&&(n=null),i=[],s=eT();s!==a;)i.push(s),s=eT();for(s=ej(),(o=ex())===a&&(o=null),l=[],u=eI();u!==a;)l.push(u),u=eI();t=ed(r,n,i,o,l)}else eg=t,t=a;return t}function eT(){var t,r,n,i,s;if(em++,t=eg,ej(),36===e.charCodeAt(eg)?(r="$",eg++):(r=a,0===em&&eC($)),r!==a){if(n=eg,i=[],s=e.charAt(eg),v.test(s)?eg++:(s=a,0===em&&eC(L)),s!==a)for(;s!==a;)i.push(s),s=e.charAt(eg),v.test(s)?eg++:(s=a,0===em&&eC(L));else i=a;(n=i!==a?e.substring(n,eg):i)!==a?t=n:(eg=t,t=a)}else eg=t,t=a;return em--,t===a&&0===em&&eC(W),t}function ex(){var t;return(t=function(){var t,r,n,i,s;if(em++,t=eg,123===e.charCodeAt(eg)?(r="{",eg++):(r=a,0===em&&eC(G)),r!==a){for(n=eg,i=[],s=e.charAt(eg),O.test(s)?eg++:(s=a,0===em&&eC(V));s!==a;)i.push(s),s=e.charAt(eg),O.test(s)?eg++:(s=a,0===em&&eC(V));(n=e.substring(n,eg),125===e.charCodeAt(eg)?(i="}",eg++):(i=a,0===em&&eC(X)),i!==a)?t=n.replace(/[\r\n]+/g," "):(eg=t,t=a)}else eg=t,t=a;return em--,t===a&&(r=a,0===em&&eC(Q)),t}())===a&&(t=function(){var t,r,n,i,s;if(em++,t=eg,59===e.charCodeAt(eg)?(r=";",eg++):(r=a,0===em&&eC(Z)),r!==a){for(n=eg,i=[],s=e.charAt(eg),w.test(s)?eg++:(s=a,0===em&&eC(J));s!==a;)i.push(s),s=e.charAt(eg),w.test(s)?eg++:(s=a,0===em&&eC(J));t=(n=e.substring(n,eg)).trim()}else eg=t,t=a;return em--,t===a&&(r=a,0===em&&eC(Y)),t}()),t}function eI(){var t,r,n,i;return(em++,t=eg,ej(),40===e.charCodeAt(eg)?(r="(",eg++):(r=a,0===em&&eC(et)),r!==a&&(n=eE())!==a&&(ej(),41===e.charCodeAt(eg)?(i=")",eg++):(i=a,0===em&&eC(er)),i!==a))?t=n:(eg=t,t=a),em--,t===a&&0===em&&eC(ee),t}function ej(){var t,r;for(em++,t=[],r=e.charAt(eg),C.test(r)?eg++:(r=a,0===em&&eC(eu));r!==a;)t.push(r),r=e.charAt(eg),C.test(r)?eg++:(r=a,0===em&&eC(eu));return em--,r=a,0===em&&eC(el),t}if(o=c(),t.peg$library)return{peg$result:o,peg$currPos:eg,peg$FAILED:a,peg$maxFailExpected:ev,peg$maxFailPos:ep};if(o!==a&&eg===e.length)return o;throw o!==a&&eg<e.length&&eC({type:"end"}),r=ev,i=ep<e.length?e.charAt(ep):null,s=ep<e.length?ew(ep,ep+1):ew(ep,ep),new n(n.buildMessage(r,i),r,i,s)}(e);this.reset();let s=i.headers,o="";for(let e in s)"fen"===e.toLowerCase()&&(o=s[e]),this.header(e,s[e]);if(t){if("1"===s.SetUp){if(!("FEN"in s))throw Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(s.FEN,{preserveHeaders:!0})}}else o&&this.load(o,{preserveHeaders:!0});let a=i.root;for(;a;){if(a.move){let e=this._moveFromSan(a.move,t);if(null==e)throw Error(`Invalid move in PGN: ${a.move}`);this._makeMove(e),this._incPositionCount()}void 0!==a.comment&&(this._comments[this.fen()]=a.comment),a=a.variations[0]}let l=i.result;l&&Object.keys(this._header).length&&this._header.Result!==l&&this.setHeader("Result",l)}_moveToSan(e,t){let r="";if(e.flags&p.KSIDE_CASTLE)r="O-O";else if(e.flags&p.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&p.NULL_MOVE)return"--";if("p"!==e.piece){let n=function(e,t){let r=e.from,n=e.to,i=e.piece,s=0,o=0,a=0;for(let e=0,l=t.length;e<l;e++){let l=t[e].from,u=t[e].to;i===t[e].piece&&r!==l&&n===u&&(s++,r>>4==l>>4&&o++,(15&r)==(15&l)&&a++)}if(s>0)if(o>0&&a>0)return x(r);else if(a>0)return x(r).charAt(1);else return x(r).charAt(0);return""}(e,t);r+=e.piece.toUpperCase()+n}e.flags&(p.CAPTURE|p.EP_CAPTURE)&&("p"===e.piece&&(r+=x(e.from)[0]),r+="x"),r+=x(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r,n,i,s,o,a=L(e);if(t||("0-0"===a?a="O-O":"0-0-0"===a&&(a="O-O-O")),"--"==a)return{color:this._turn,from:0,to:0,piece:"k",flags:p.NULL_MOVE};let l=P(a),u=this._moves({legal:!0,piece:l});for(let e=0,t=u.length;e<t;e++)if(a===L(this._moveToSan(u[e],u)))return u[e];if(t)return null;let c=!1;if((n=a.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))?(r=n[1],i=n[2],s=n[3],o=n[4],1==i.length&&(c=!0)):(n=a.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/))&&(r=n[1],i=n[2],s=n[3],o=n[4],1==i.length&&(c=!0)),l=P(a),u=this._moves({legal:!0,piece:r||l}),!s)return null;for(let e=0,t=u.length;e<t;e++)if(i){if((!r||r.toLowerCase()==u[e].piece)&&b[i]==u[e].from&&b[s]==u[e].to&&(!o||o.toLowerCase()==u[e].promotion))return u[e];else if(c){let t=x(u[e].from);if((!r||r.toLowerCase()==u[e].piece)&&b[s]==u[e].to&&(i==t[0]||i==t[1])&&(!o||o.toLowerCase()==u[e].promotion))return u[e]}}else if(a===L(this._moveToSan(u[e],u)).replace("x",""))return u[e];return null}ascii(){let e="   +------------------------+\n";for(let t=b.a8;t<=b.h1;t++){if(0==(15&t)&&(e+=" "+"87654321"[t>>4]+" |"),this._board[t]){let r=this._board[t].type;e+=" "+("w"===this._board[t].color?r.toUpperCase():r.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+"   +------------------------+\n     a  b  c  d  e  f  g  h"}perft(e){let t=this._moves({legal:!1}),r=0,n=this._turn;for(let i=0,s=t.length;i<s;i++)this._makeMove(t[i]),!this._isKingAttacked(n)&&(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn!=e&&(this.move("--"),!0)}turn(){return this._turn}board(){let e=[],t=[];for(let r=b.a8;r<=b.h1;r++)null==this._board[r]?t.push(null):t.push({square:x(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in b){let t=b[e];return((t>>4)+(15&t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){let t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){let n=t.pop();if(!n)break;e?r.push(new g(this,n)):r.push(this._moveToSan(n,this._moves())),this._makeMove(n)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){let t=this._positionCount.get(e)??0;1===t?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){let e=[],t={},r=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){let t=e.pop();if(!t)break;this._makeMove(t),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){let e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{let t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(let r of["k","q"])void 0!==t[r]&&(t[r]?this._castling[e]|=D[r]:this._castling[e]&=~D[r]);this._updateCastlingRights();let r=this.getCastlingRights(e);return(void 0===t.k||t.k===r.k)&&(void 0===t.q||t.q===r.q)}getCastlingRights(e){return{k:(this._castling[e]&D.k)!=0,q:(this._castling[e]&D.q)!=0}}moveNumber(){return this._moveNumber}}}}]);